

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Migrating from Zephyr v1.6 IP Stack to v1.7 &mdash; Zephyr Project Documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/zephyr-custom.css" type="text/css" />
  

  
        <link rel="copyright" title="Copyright" href="../../copyright.html"/>
    <link rel="top" title="Zephyr Project Documentation" href="../../index.html"/>
        <link rel="up" title="Networking" href="networking.html"/>
        <link rel="next" title="IP Stack Architecture" href="ip-stack-architecture.html"/>
        <link rel="prev" title="Overview" href="overview.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Zephyr Project
          

          
          </a>

          
            
            
              <div class="version">
                1.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introducing_zephyr.html">Introducing Zephyr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boards/boards.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel/kernel.html">Zephyr Kernel Primer (version 2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application/application.html">Application Development Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../porting/porting.html">Porting Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers/drivers.html">Device Drivers and Device Model</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../subsystems.html">Subsystems</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/bluetooth.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c_library.html">Standard C Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging/index.html">Logging</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="networking.html">Networking</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Migrating from Zephyr v1.6 IP Stack to v1.7</a></li>
<li class="toctree-l3"><a class="reference internal" href="ip-stack-architecture.html">IP Stack Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="networking-api-usage.html">Network Connectivity API</a></li>
<li class="toctree-l3"><a class="reference internal" href="l2-and-drivers.html">L2 Stack and Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="network-management-api.html">Network Management API</a></li>
<li class="toctree-l3"><a class="reference internal" href="buffers.html">Network Buffers</a></li>
<li class="toctree-l3"><a class="reference internal" href="qemu_setup.html">Networking with Qemu</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../power_management.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sensor.html">Sensor Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell.html">Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../test/ztest.html">Test Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usb/usb.html">USB device stack</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/api.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/samples.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/kconfig/index.html">Configuration Options Reference Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/code.html">Contributing Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../LICENSING.html">Licensing of Zephyr Project components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary of Terms</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Zephyr Project</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../subsystems.html">Subsystems</a> &raquo;</li>
        
          <li><a href="networking.html">Networking</a> &raquo;</li>
        
      <li>Migrating from Zephyr v1.6 IP Stack to v1.7</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/subsystems/networking/ip-stack-migrate.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="migrating-from-zephyr-v1-6-ip-stack-to-v1-7">
<span id="ip-stack-migrate"></span><h1>Migrating from Zephyr v1.6 IP Stack to v1.7<a class="headerlink" href="#migrating-from-zephyr-v1-6-ip-stack-to-v1-7" title="Permalink to this headline">Â¶</a></h1>
<p>Zephyr v1.6 and earlier is using network IP stack that has its origin in uIP.
The uIP stack was modified heavily to use it in Zephyr. The uIP stack had
limitations described below that required new and native IP stack to be
developed.</p>
<p>This document is a high level description of the changes between these two
major Zephyr releases. For individual changes, the application developer can
find more details in the network header file documentation in include/net/.</p>
<p>Because of this new native IP stack, the following changes are required to
migrate applications using the older v1.6 IP stack to the new v1.7 IP stack:</p>
<ul class="simple">
<li><strong>Dual IPv6 and IPv4 stack support.</strong> In Zephyr v1.6, applications could not
use both IPv6 and IPv4 simultaneously. This is changed in Zephyr v1.7 and the
IP stack supports both IPv6 and IPv4 at the same time. In practice this means
that applications should be prepared to support both IPv6 and IPv4 in the
code.</li>
<li><strong>Multiple simultaneous network technologies support.</strong>
In Zephyr v1.7 it is possible to have multiple network technologies enabled
at the same time. This means that applications can utilize concurrently e.g.,
IEEE 802.15.4 and Bluetooth IP networking. The different network technologies
are abstracted to network interfaces and there can be multiple network
interfaces in the system depending on configuration.</li>
<li><strong>Network Kconfig options are changed.</strong> Most of the networking configuration
options are renamed. Please check the <a class="reference internal" href="networking.html#networking"><span class="std std-ref">Networking</span></a> documentation for the
new names.</li>
<li><strong>All uIP based APIs are gone.</strong> Those APIs were not public in v1.6 but
applications could call them anyway. These uIP APIs were mainly used to set
IP address etc. management style operations. The new management APIs can be
found in net_if.h and net_mgmt.h in Zephyr v1.7.</li>
<li><strong>Network buffer management is changed.</strong> In earlier Zephyr versions, there
were big 1280 byte long buffers that applications could utilize. In Zephyr
v1.7 this is changed so that device memory is utilized more efficiently.
Now small buffer fragments are allocated to store the data, and these
fragments can then be chained together to store larger amount of data. For
applications this means that the memory received from network or sent to
network is not contiguous and application should use the helper functions
found in nbuf.h when reading and writing the network data.</li>
<li><strong>Network context/socket API is changed.</strong> The new API found in net_context.h
is more BSD-socket-like than the earlier API. The new context API is not
fully BSD socket compatible as it needs to support both synchronous and
asynchronous operations. Porting BSD socket application to use the
net_context_* API is easier than in Zephyr v1.6.</li>
<li><strong>CoAP library API is changed.</strong> The Zephyr v1.6 CoAP API is removed.
The new Zephyr v1.7 API is called ZoAP and it can be found in zoap.h header
file.</li>
<li><strong>The TinyDTLS library is removed.</strong> The tinydtls crypto library was used
only by CoAP in Zephyr v1.6 and it is removed in Zephyr v1.7. It is replaced
by mbedtls library.</li>
</ul>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ip-stack-architecture.html" class="btn btn-neutral float-right" title="IP Stack Architecture" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; <a href="../../copyright.html">Copyright</a> 2015-2017 Zephyr Project members and individual contributors..
      Last updated on Mar 14, 2017.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.7.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>